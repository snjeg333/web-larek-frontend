# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура приложения

Код приложения разделен на слои согласно парадигме MVP:


### Слой base

#### Класс Api

Класс `Api` представляет собой утилиту для работы с HTTP-запросами в приложениях JavaScript. 

- **`ApiPostMethods`**: Тип, определяющий допустимые методы HTTP-запросов для операций создания или изменения данных.

- **`baseUrl`**: Строковое свойство, хранящее базовый URL API, к которому будут отправляться запросы.

- **`options`**: Объект `RequestInit`, содержащий настройки по умолчанию для всех запросов, включая заголовки.

- **Конструктор**: Принимает `baseUrl` и необязательные `options`, инициализируя свойства класса.

- **`handleResponse`**: Защищённый асинхронный метод, обрабатывающий ответ от сервера. Возвращает данные в случае успешного ответа или выбрасывает ошибку.

- **`get`**: Метод для выполнения GET-запросов. Принимает URI и возвращает промис с результатом.

- **`post`**: Метод для выполнения POST-запросов (а также PUT и DELETE, если указано). Принимает URI, данные для отправки и метод запроса, возвращает промис с результатом.




#### Класс EventEmitter

Класс `EventEmitter` предназначен для управления событиями в JavaScript-приложениях.

- **`EventName`**: Тип данных, представляющий имя события в виде строки.
- **`Subscriber<D>`**: Тип функции-подписчика, которая будет вызвана при срабатывании события, с возможным параметром `data`.
- **`Event<D>`**: Тип объекта события, содержащего имя и данные события.
- **`EventMap`**: Карта, связывающая имена событий с наборами подписчиков.

Интерфейс `IEventEmitter` определяет следующие методы:
- **`on`**: Подписка на событие.
- **`off`**: Отписка от события.
- **`emit`**: Инициирование события.
- **`makeEmiter`**: Создание функции-триггера для генерации события.

Класс `EventEmitter` включает:
- **`events`**: Приватное свойство, хранящее карту событий.
- **`on`**: Метод для подписки на событие.
- **`onBatch`**: Метод для подписки на несколько событий одновременно.
- **`off`**: Методы для отписки от события (с удалением всех подписчиков или конкретного подписчика).
- **`emit`**: Метод для инициирования события, вызывающий все подписанные функции.
- **`makeEmiter`**: Метод для создания функции-триггера, которая при вызове инициирует событие с данными.


#### Класс Model<T>

Класс `Model` является абстрактным базовым классом, который предоставляет основу для создания моделей данных в JavaScript-приложениях.

- **`IModel`**: Интерфейс, определяющий структуру модели, включая свойство `events`, которое представляет собой экземпляр `IEventEmitter`.

- **`Model<T>`**: Абстрактный класс, реализующий интерфейс `IModel`. Он предназначен для работы с данными типа `T`.

- **Конструктор**: Принимает объект данных `data` и экземпляр `IEventEmitter`. Инициализирует модель, присваивая ей данные и систему событий.

- **`emitChanges`**: Метод для инициирования события об изменении модели. Принимает объект события `event` и вызывает метод `emit` экземпляра `IEventEmitter`.

- **`onChanges`**: Метод для подписки на события изменения модели. Принимает имя события `eventName` и функцию-подписчика `callback`.

- **`onChangesBatch`**: Метод для подписки на несколько событий изменения модели одновременно. Принимает массив имен событий `eventNames` и функцию-подписчика `callback`.


#### Класс Presenter

Класс `Presenter` является абстрактным классом, который служит в качестве посредника между моделью (`Model`) и представлением (`View`) в архитектурном шаблоне проектирования MVP (Model-View-Presenter). 

- **`constructor`**: Конструктор класса принимает два защищённых параметра: `view` и `model`. `view` является экземпляром класса `View`, который отвечает за отображение данных пользователю. `model` представляет собой экземпляр интерфейса `IModel`, который управляет данными приложения.

- **`view`**: Защищённое свойство, которое содержит ссылку на экземпляр `View`. Это позволяет `Presenter` обновлять представление в ответ на изменения в модели или ввод пользователя.

- **`model`**: Защищённое свойство, которое содержит ссылку на экземпляр `IModel`. Это позволяет `Presenter` реагировать на изменения в данных и соответствующим образом обновлять представление.

#### Класс View<T>

Класс `View` представляет собой абстрактный базовый класс для создания представлений. Он предоставляет методы для управления DOM-элементами и их состояниями. 

- **Конструктор**: Принимает DOM-элемент `container`, который служит корневым элементом для представления. Этот элемент используется для визуализации данных модели.

- **`toggleClass`**: Метод для переключения CSS-класса у элемента. Принимает `element`, `className` и необязательный параметр `force`. Позволяет добавлять или удалять класс у элемента, опционально принудительно.

- **`setText`**: Метод для установки текстового содержимого элемента. Принимает `element` и `value`, которое преобразуется в строку и устанавливается как текстовое содержимое элемента.

- **`setDisabled`**: Метод для изменения статуса блокировки элемента. Принимает `element` и булево значение `state`, которое определяет, будет ли элемент заблокирован.

- **`setHidden` и `setVisible`**: Методы для управления видимостью элемента. `setHidden` скрывает элемент, устанавливая его стиль `display` в 'none', а `setVisible` делает элемент видимым, удаляя свойство `display`.

- **`setValue`**: Метод для установки значения элемента ввода. Принимает `element` и `value`, которое устанавливается как значение элемента.

- **`setImage`**: Метод для установки изображения с альтернативным текстом. Принимает `element`, `src` и необязательный параметр `alt`. Устанавливает атрибуты `src` и `alt` для элемента изображения.

- **`render`**: Метод для визуализации представления. Принимает необязательный параметр `data`, который может быть использован для обновления состояния представления. Возвращает корневой DOM-элемент `container`.

### Слой models

#### Класс Basket

Класс `Basket` является расширением класса `Model` и реализует интерфейс `IBasket`, представляя собой модель корзины покупок в приложении. 

- **Свойства**:
  - `items`: Массив идентификаторов продуктов (`ProductId[]`), представляющий элементы, добавленные в корзину.

- **Методы**:
  - `open()`: Открывает корзину, вызывая событие `openBasketEventCreator()`, которое может быть использовано для отображения корзины пользователю.
  - `clear()`: Очищает корзину, устанавливая `items` в пустой массив, и вызывает события `clearBasketEventCreator()` и `updateBasketEventCreator()` для обновления состояния корзины.
  - `remove(item: ProductId)`: Удаляет элемент из корзины, фильтруя массив `items` и исключая указанный `item`. После удаления вызывает события `removeBasketEventCreator()` и `updateBasketEventCreator()` для обновления состояния корзины.
  - `add(item: ProductId)`: Добавляет элемент в корзину, вставляя `item` в массив `items`, и вызывает события `addBasketEventCreator()` и `updateBasketEventCreator()` для обновления состояния корзины.


#### Класс Modal

Класс `Modal` является расширением класса `Model` и предназначен для управления модальными окнами в пользовательском интерфейсе.

- **Методы**:
  - `open(data: OpenModalEventData)`: Открывает модальное окно, используя данные `OpenModalEventData`. При вызове этого метода генерируется событие `openModalEventCreator(data)`, которое может быть использовано для отображения модального окна с соответствующими данными.
  - `close()`: Закрывает модальное окно. При вызове этого метода генерируется событие `closeModalEventCreator()`, которое может быть использовано для скрытия модального окна.

#### Класс Order

Класс `Order` представляет собой модель заказа в приложении и реализует интерфейс `IOrder`. Он используется для управления данными заказа, включая контактную информацию пользователя, выбранные товары, адрес доставки и способ оплаты.

- **Свойства**:
  - `phone`: Строка, содержащая номер телефона клиента.
  - `email`: Строка, содержащая адрес электронной почты клиента.
  - `items`: Массив идентификаторов продуктов (`ProductId[]`), представляющий товары в заказе.
  - `address`: Строка, содержащая адрес доставки заказа.
  - `paymentType`: Переменная типа `PaymentType`, указывающая на выбранный способ оплаты. Может быть `null`, если способ оплаты не выбран.
  - `errors`: Необязательный массив строк, содержащий сообщения об ошибках валидации.
  - `valid`: Необязательный булевый флаг, указывающий на валидность данных заказа.

Класс `Order` включает в себя следующие методы для управления данными заказа и валидации форм:

- **Методы**:
  - `openOrderForm()`: Открывает форму заказа, вызывая событие `openOrderFormEventCreator()`.
  - `openContactsForm()`: Открывает форму контактов, вызывая событие `openContactsFormEventCreator()`.
  - `openSuccessForm()`: Открывает форму успешного завершения заказа, вызывая событие `openSuccessEventCreator()`.
  - `setOrderItems(items: ProductId[])`: Устанавливает товары заказа, принимая массив идентификаторов продуктов.
  - `setPaymentType(paymentType: PaymentType)`: Устанавливает способ оплаты и обновляет форму заказа.
  - `setAddress(address: string)`: Устанавливает адрес доставки и обновляет форму заказа.
  - `setEmail(email: string)`: Устанавливает адрес электронной почты и обновляет форму контактов.
  - `setPhone(phone: string)`: Устанавливает номер телефона и обновляет форму контактов.
  - `updateOrderForm()`: Проверяет данные заказа на ошибки, устанавливает флаг валидности и вызывает событие `updateOrderFromEventCreator()`.
  - `updateContactsForm()`: Проверяет контактные данные на ошибки, устанавливает флаг валидности и вызывает событие `updateContactsFromEventCreator()`.
  - `resetValidation()`: Сбрасывает информацию об ошибках и флаг валидности.

#### Класс Preview

Класс `Preview` является компонентом модели в архитектуре приложения и реализует интерфейс `IPreview`. Он отвечает за управление предпросмотром продукта, позволяя пользователю просматривать детали выбранного товара перед покупкой.

- **Свойства**:
  - `productId`: Идентификатор продукта (`ProductId`), который может быть `null`, если продукт не выбран.

- **Методы**:
  - `open(data: OpenPreviewEventData)`: Открывает предпросмотр продукта, устанавливая `productId` из данных события и вызывая событие `openPreviewEventCreator(data)` для оповещения остальной части приложения о необходимости отобразить предпросмотр.

#### Класс Products

Класс `Products` является ключевым компонентом модели в архитектуре приложения и реализует интерфейс `IProducts`. Он управляет коллекцией продуктов, предоставляя методы для их обработки и взаимодействия с пользовательским интерфейсом. 

- **Свойства**:
  - `ids`: Массив идентификаторов продуктов (`ProductId`), представляющий собой список всех продуктов в модели.
  - `items`: Объект, ключами которого являются идентификаторы продуктов, а значениями — объекты продуктов (`IProduct`), содержащие всю информацию о каждом продукте.

- **Методы**:
  - `setProducts(products: IProduct[])`: Принимает массив продуктов и преобразует его в объект `items`, где каждый продукт индексируется по его `id`. Также обновляет массив `ids`, содержащий идентификаторы всех продуктов. После установки продуктов вызывает событие `updateProductsEventCreator()`, оповещая остальную часть приложения об изменении списка продуктов.
  - `openPreview(data: OpenModalEventData)`: Вызывает событие `openModalEventCreator(data)`, которое может быть использовано для открытия модального окна предпросмотра продукта или других модальных окон в приложении.

### Слой presenters

#### Класс Basket 

Класс `BasketPresenter` относится к слою презентации в архитектуре приложения и управляет взаимодействием между моделью состояния приложения (`AppState`) и представлением корзины (`IBasketView`). 

- **Конструктор**:
  - Принимает `view` (представление корзины) и `model` (модель состояния приложения) как защищённые свойства.
  - Регистрирует обработчик события `BASKET_OPEN`, который вызывает метод `openBasket` при изменении состояния корзины.
  - Добавляет обработчик кнопки заказа в представлении, который устанавливает элементы заказа в модели заказа и открывает форму заказа.

- **Методы**:
  - `openBasket()`: Открывает модальное окно с содержимым, сгенерированным представлением корзины, включая список карточек продуктов и общую стоимость корзины.
  - `createBasketCards()`: Создаёт массив карточек продуктов (`CardView`), каждая из которых соответствует элементу в корзине. Для каждой карточки добавляется обработчик кнопки, который удаляет продукт из корзины и обновляет отображение.

  #### Класс ContactsForm

Класс `ContactsFormPresenter` является производным от базового класса `Presenter` и отвечает за управление формой контактов в приложении. Он связывает модель состояния (`AppState`) с представлением формы контактов (`ContactsFormView`).

- **Конструктор**:
  - Инициализирует базовый класс `Presenter` с представлением и моделью.
  - Добавляет обработчики событий для изменения полей ввода, обновляя данные заказа в модели.
  - Добавляет обработчик события отправки формы, который выполняет заказ через API и обрабатывает успешное завершение заказа.

- **Методы**:
  - `addInputChangeHandler(field, value)`: Обновляет информацию о контактах в модели заказа при изменении полей ввода.
  - `addSubmitHandler()`: Обрабатывает отправку формы, делая запрос на API для заказа продуктов и очищает корзину после успешного заказа.
  - `onChanges(event, callback)`: Реагирует на изменения, связанные с открытием формы контактов и её обновлением, и вызывает соответствующие методы для рендеринга формы с актуальными данными и статусом валидации.

#### Класс Modal 

Класс `ModalPresenter`  отвечает за управление модальными окнами.

- **Конструктор**:
  - Принимает `view` (интерфейс модального окна) и `model` (модель состояния приложения) как защищённые свойства.
  - Инициализирует базовый класс `Presenter` с представлением и моделью.
  - Добавляет обработчик закрытия модального окна, который вызывает метод `closeModal` модели.

- **Методы**:
  - `addCloseHandler()`: Добавляет обработчик события, который закрывает модальное окно.
  - `onChanges(event, callback)`: Регистрирует обработчики событий для открытия и закрытия модального окна, вызывая методы рендеринга с соответствующими данными.

#### Класс OrderForm

Класс `OrderFormPresenter` управляет формой заказа. 

- **Конструктор**:
  - Принимает `view` (представление формы заказа) и `model` (модель состояния приложения) как защищённые свойства.
  - Инициализирует базовый класс `Presenter` с представлением и моделью.
  - Добавляет обработчики событий для элементов управления формой заказа.

- **Методы**:
  - `addDeliveryTypeSelectorHandler(paymentType: PaymentType)`: Устанавливает тип оплаты в модели заказа.
  - `addInputChangeHandler(field, value)`: Обновляет адрес в модели заказа при его изменении.
  - `addContactsButtonHandler()`: Открывает форму контактов при нажатии соответствующей кнопки.
  - `onChanges(event, callback)`: Реагирует на события открытия и обновления формы заказа, обновляя представление с актуальными данными и статусом валидации.

#### Класс Page

Класс `PagePresenter` отвечает за управление страницей продуктов. 

- **Конструктор**:
  - Принимает `view` (интерфейс страницы) и `model` (модель состояния приложения) как защищённые свойства.
  - Инициализирует обработчики событий для модели и представления, такие как открытие корзины, обновление продуктов и блокировка/разблокировка страницы при открытии/закрытии модального окна.

- **Методы**:
  - `addOpenBasketHandler()`: Добавляет обработчик для открытия корзины.
  - `onChanges(event, callback)`: Регистрирует обработчики событий для обновления продуктов, открытия/закрытия модального окна и обновления корзины.
  - `updateProducts()`: Обновляет список продуктов на странице.
  - `createGallery()`: Создаёт галерею продуктов, используя данные из модели.

#### Класс Preview

Класс `PreviewPresenter` управляет предпросмотром продуктов в веб-приложении. 

- **Конструктор**:
  - Принимает `view` (интерфейс карточки продукта) и `model` (модель состояния приложения) как защищённые свойства.
  - Регистрирует обработчик событий `PREVIEW_OPEN` для открытия предпросмотра продукта.
  - Добавляет обработчик для кнопки в представлении, который управляет добавлением или удалением продукта из корзины и открытием предпросмотра.

- **Методы**:
  - `openPreview(id: ProductId)`: Открывает предпросмотр продукта, обновляет текст кнопки в зависимости от наличия продукта в корзине и отображает информацию о продукте.

#### Класс Success 

Класс `SuccessPresenter` является расширением базового класса `Presenter` и отвечает за управление отображением экрана успешного завершения операции, например, покупки в веб-приложении. 

- **Конструктор**:
  - Наследует `view` (интерфейс экрана успеха) и `model` (модель состояния приложения) от базового класса `Presenter`.
  - Инициализирует обработчик события `SUCCESS_OPEN`, который открывает модальное окно с содержимым, отображаемым через `view.render`, включая общую сумму заказа, полученную из модели.

- **Методы**:
  - `closeSuccessButtonHandler()`: Добавляет обработчик для кнопки закрытия экрана успеха, который закрывает модальное окно.

### Слой views

#### Класс Basket

Класс `BasketView` управляет отображением корзины в веб-приложении. 

- **Конструктор**:
  - Принимает `container` (HTML-элемент, в котором будет размещаться корзина) как защищённое свойство.
  - Инициализирует элементы интерфейса корзины, такие как кнопка, цена и список продуктов, используя вспомогательные функции `ensureElement` и `bem`.

- **Методы**:
  - `addOrderButtonHandler(handler: () => void)`: Добавляет обработчик событий для кнопки заказа, который вызывается при нажатии на кнопку.
  - `set price(price: Price)`: Устанавливает текст цены в корзине и обрабатывает случаи, когда цена равна `null`, отображая "Бесценно" и делая кнопку неактивной.
  - `set list(items: HTMLElement[])`: Заменяет дочерние элементы списка корзины на новые элементы и делает кнопку неактивной, если список пуст.

#### Класс Card 

Класс `CardView` отвечает за отображение карточки продукта в веб-приложении. 

- **Конструктор**:
  - Принимает `container` (HTML-элемент, в котором будет размещаться карточка продукта) как защищённое свойство.
  - Инициализирует элементы интерфейса карточки продукта, такие как заголовок, изображение, категория, описание, цена и кнопка, используя вспомогательные функции `ensureElement`, `bem` и методы поиска DOM.

- **Методы**:
  - `addButtonHandler(handler: () => void)`: Добавляет обработчик событий для кнопки на карточке, который вызывается при нажатии на кнопку.
  - `addContainerHandler(handler: () => void)`: Добавляет обработчик событий для всего контейнера карточки.
  - Сеттеры для свойств `buttonText`, `id`, `title`, `image`, `category`, `description`, `price`, `index`: Устанавливают соответствующие значения для элементов интерфейса карточки продукта.

#### Класс ContactsForm

Класс `ContactsFormView` отвечает за управление формой контактов в веб-приложении. 

- **Конструктор**:
  - Принимает `container` (HTML-форму, в которой будет размещаться форма контактов) как защищённое свойство.
  - Инициализирует элементы интерфейса формы контактов, такие как поля ввода для электронной почты и телефона, а также кнопку, используя вспомогательные функции `ensureElement` и `bem`.

- **Методы**:
  - `set phone(value: string)`: Устанавливает значение в поле ввода телефона.
  - `set email(value: string)`: Устанавливает значение в поле ввода электронной почты.


#### Класс Form

Класс `Form`  обеспечивает общую структуру и поведение для форм, позволяя создавать различные конкретные формы с уникальным содержимым и валидацией.

- **Конструктор**:
  - Принимает `container` (HTML-форму, которая будет использоваться как контейнер для формы) как защищённое свойство.
  - Инициализирует элементы управления формы, такие как кнопка отправки и элемент для отображения ошибок, используя вспомогательную функцию `ensureElement`.

- **Методы**:
  - `addSubmitHandler(handler: () => void)`: Добавляет обработчик событий для события отправки формы, который предотвращает стандартное поведение и вызывает предоставленный обработчик.
  - `addInputChangeHandler(handler: (data: string, value: string) => void)`: Добавляет обработчик событий для события ввода в любом из полей формы, который вызывает предоставленный обработчик с именем поля и его значением.

- **Сеттеры**:
  - `set valid(value: boolean)`: Устанавливает состояние валидности формы, активируя или деактивируя кнопку отправки.
  - `set errors(value: string[])`: Устанавливает текст ошибок в элементе для отображения ошибок.

- **Метод `render`**:
  - Принимает объект состояния формы, который может содержать валидность, ошибки и любые другие данные формы.
  - Вызывает метод `render` базового класса `View` и применяет состояние к форме.

#### Класс Modal

Класс `ModalView` предназначен для управления модальными окнами в веб-приложении. 

- **Конструктор**:
  - Принимает `container` (HTML-элемент, который будет использоваться как контейнер для модального окна) как защищённое свойство.
  - Инициализирует кнопку закрытия и контентное пространство модального окна, используя вспомогательные функции `ensureElement` и `bem`.

- **Методы**:
  - `addCloseHandler(handler: () => void)`: Добавляет обработчик событий для закрытия модального окна, который может быть вызван кликом на кнопку закрытия или на контейнер модального окна.
  - `set content(value: HTMLElement)`: Заменяет дочерние элементы контентного пространства модального окна на новый HTML-элемент.
  - `set visibility(value: boolean)`: Управляет видимостью модального окна, добавляя или удаляя CSS-класс, отвечающий за активное состояние.

#### Класс OrderForm

Класс `OrderFormView` расширяет функциональность базового класса `Form` и предназначен для управления формой заказа.

- **Конструктор**:
  - Принимает `container` (HTML-элемент формы, который будет использоваться как контейнер для формы заказа) как защищённое свойство.
  - Инициализирует элементы управления формы заказа, такие как поля ввода адреса и кнопки выбора типа оплаты, используя вспомогательную функцию `ensureElement`.

- **Методы**:
  - `addContactsButtonHandler(handler: () => void)`: Добавляет обработчик событий для кнопки контактов, который вызывается при её нажатии.
  - `addDeliveryTypeSelectorHandler(handler: (name: PaymentType) => void)`: Добавляет обработчик событий для кнопок выбора типа оплаты, который вызывает предоставленный обработчик с именем выбранного типа оплаты.

- **Сеттеры**:
  - `set paymentType(value: PaymentType)`: Устанавливает тип оплаты, активируя соответствующую кнопку и деактивируя другую.
  - `set address(value: string)`: Устанавливает адрес в поле ввода адреса.

#### Класс Page

Класс `PageView` предназначен для управления отображением страницы веб-приложения. 

- **Конструктор**:
  - Принимает `container` (HTML-элемент, который будет использоваться как контейнер для страницы) как защищённое свойство.
  - Инициализирует основные элементы управления страницы, такие как счётчик корзины, каталог продуктов, обёртка страницы и элемент корзины, используя вспомогательную функцию `ensureElement`.

- **Методы**:
  - `addOpenBasketHandler(handler: () => void)`: Добавляет обработчик событий для открытия корзины, который вызывается при клике на элемент корзины.

- **Сеттеры**:
  - `set counter(value: number)`: Устанавливает значение счётчика в элементе счётчика корзины.
  - `set catalog(items: HTMLElement[])`: Заменяет дочерние элементы каталога на предоставленные элементы HTML.
  - `set locked(value: boolean)`: Управляет блокировкой интерфейса пользователя, добавляя или удаляя CSS-класс, отвечающий за 

#### Класс Success 

Класс `SuccessView` предназначен для управления отображением экрана успешного завершения заказа в веб-приложении. 

- **Конструктор**:
  - Принимает `container` (HTML-элемент, который будет использоваться как контейнер для экрана успешного завершения заказа) как защищённое свойство.
  - Инициализирует элементы управления экрана успешного завершения заказа, такие как кнопка закрытия и описание заказа, используя вспомогательную функцию `ensureElement`.

- **Методы**:
  - `closeSuccessButtonHandler(handler: () => void)`: Добавляет обработчик событий для кнопки закрытия экрана успешного завершения заказа, который вызывается при её нажатии.

- **Сеттеры**:
  - `set total(total: string)`: Устанавливает текстовое описание суммы списанных средств в элементе описания заказа.

#### Класс AppState

Класс `AppState` является центральным компонентом управления состоянием. Он инкапсулирует всю бизнес-логику, связанную с данными приложения, и предоставляет интерфейс для их изменения и получения. 

- **Конструктор**:
  - Принимает `events` (экземпляр `IEventEmitter` для управления событиями) как аргумент.
  - Инициализирует все основные модели данных приложения (`Basket`, `Products`, `Order`, `Modal`, `Preview`) с начальными значениями и связывает их с системой событий.

- **Свойства**:
  - `basket`: Экземпляр класса `Basket`, управляющий товарами в корзине пользователя.
  - `products`: Экземпляр класса `Products`, содержащий информацию о продуктах.
  - `order`: Экземпляр класса `Order`, отвечающий за управление заказами.
  - `modal`: Экземпляр класса `Modal`, управляющий модальными окнами.
  - `preview`: Экземпляр класса `Preview`, предоставляющий предварительный просмотр продуктов.

- **Методы**:
  - `getBasketTotal()`: Возвращает общую стоимость товаров в корзине. Если цена какого-либо товара не определена, возвращает `null`.
  - `getOrderTotal()`: Вычисляет общую стоимость товаров в заказе.
  - `closeModal()`: Вызывает событие для закрытия модального окна.

#### Класс LarekApi 

Класс `LarekApi` является производным от базового класса `Api` и реализует интерфейс `ILarekApi`, предоставляя методы для взаимодействия с серверным API веб-приложения.

- **Конструктор**:
  - Принимает `cdn` (URL CDN для доступа к ресурсам), `baseUrl` (базовый URL API) и `options` (необязательные параметры запроса) как аргументы.
  - Инициализирует базовый класс `Api` с `baseUrl` и `options`.
  - Устанавливает `cdn` как постоянное свойство для доступа к ресурсам CDN.

- **Методы**:
  - `getProductsList()`: Возвращает список продуктов с сервера. Ожидается, что метод вернёт объект `Promise`, содержащий общее количество продуктов и массив продуктов.
  - `orderProducts(order: IOrder, total: number)`: Отправляет заказ на сервер. Принимает объект заказа и общую стоимость заказа, возвращает объект `Promise`.

Класс `LarekApi`  использует методы `get` и `post` базового класса `Api` для выполнения HTTP-запросов. 

### Типы данных

- **`ProductId`**:
  - Тип `ProductId` представляет собой строку, которая используется как уникальный идентификатор продукта в системе.

  ```

  export type ProductId = string;

  ```

- **`ProductCategory`**:
  - Тип `ProductCategory` определяет категорию продукта 

  ```
  export type ProductCaregory =
	| 'другое'
	| 'софт-скил'
	| 'хард-скил'
	| 'дополнительное'
	| 'кнопка';

  ```

- **`Price`**:
  - Тип `Price` определяет цену продукта и может быть числом (если цена установлена) или `null` (если цена отсутствует).

  ```

  export type Price = number | null;

  ```

- **`PaymentType`**:
  - Тип `PaymentType` используется для указания способа оплаты и может принимать значения `"card"` для оплаты картой или `"cash"` для оплаты наличными.

  ```

  export type PaymentType = "card" | "cash"

  ```



_Список всех событий, которые могут генерироваться в системе:_

- **`BASKET_CLEAR`**: Событие, указывающее на необходимость очистки корзины. 

- **`BASKET_OPEN`**: Событие, сигнализирующее о том, что корзина была открыта. 

- **`BASKET_REMOVE`**: Событие, указывающее на удаление элемента из корзины. 

- **`BASKET_ADD`**: Событие, сигнализирующее о добавлении элемента в корзину. 
- **`BASKET_UPDATE`**: Событие, указывающее на обновление содержимого корзины. 

- **`MODAL_OPEN`**: Событие, сигнализирующее об открытии модального окна. 

- **`MODAL_CLOSE`**: Событие, сигнализирующее о закрытии модального окна. 

- **`PRODUCTS_UPDATE`**: Событие, указывающее на обновление списка продуктов. 

- **`PREVIEW_OPEN`**: Событие, сигнализирующее об открытии предпросмотра продукта. 

- **`ORDER_FORM_OPEN`**: Событие, сигнализирующее об открытии формы заказа.

- **`ORDER_FORM_UPDATE`**: Событие, указывающее на обновление формы заказа. 

- **`CONTACTS_FORM_OPEN`**: Событие, сигнализирующее об открытии формы контактов. 

- **`CONTACTS_FORM_UPDATE`**: Событие, указывающее на обновление формы контактов. 

- **`SUCCESS_OPEN`**: Событие, сигнализирующее об успешном выполнении операции и открытии соответствующего уведомления. 